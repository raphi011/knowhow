services:
  surrealdb:
    image: surrealdb/surrealdb:v3.0.0-beta.1
    container_name: memcp-surrealdb
    command: start --user root --pass root memory
    ports:
      - "8000:8000"
    restart: unless-stopped

  memcp:
    build: .
    container_name: memcp-dashboard
    ports:
      - "3000:3000"
    environment:
      - SURREALDB_URL=ws://surrealdb:8000/rpc
      - SURREALDB_NAMESPACE=knowledge
      - SURREALDB_DATABASE=graph
      - SURREALDB_USER=root
      - SURREALDB_PASS=root
    depends_on:
      - surrealdb
    restart: unless-stopped
